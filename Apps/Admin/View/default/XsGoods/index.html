<include file="Public:header" />
<include file="nav" />


<div class="m20">
	<div class="m20 text-center">
		<h1 style="font-size:8em;font-weight:800;">温馨提示</h1>
		<h2 style="font-size:3em;font-weight:800;">重建索引时将会影响前端使用，且重建索引需要耗费一定的时间，<br />如必须执行此操作建议在用户少的情况下再操作！</h2>
	</div>
	<div class="alert alert-warning alert-white-alt2 rounded">
		<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
		<div class="icon"><i class="fa fa-warning"></i></div>
		<div class="ft16"><strong>提示!</strong> 重建索引之前必须先清除索引</div>
	</div>
	<div class="row">
		<div class="col-xs-4">
			<div class="block-flat">
				<div class="header">
					<h3>商品索引</h3>
				</div>
				<div class="content text-center" style="min-height:250px">
					<div class="btn btn-150px btn-danger btn-trans btn-lg m20" onclick="clean_index($(this))" data-url="/XsGoods/clean"><i class="fa fa-times"></i> 清除索引</div>
					<div class="clearfix"></div>
					<div class="btn btn-150px btn-danger btn-trans btn-lg m20" onclick="build_index($(this))" data-url="/XsGoods/build_index"><i class="fa fa-random"></i> 重建索引</div>
					<div class="clearfix"></div>
					<div class="btn btn-150px btn-danger btn-lg m20" onclick="update_index($(this))" data-url="/XsGoods/update_index"><i class="fa fa-refresh"></i> 更新索引</div>					
				</div>
			</div>
		</div>
		
		<div class="col-xs-4">
			<div class="block-flat">
				<div class="header">
					<h3>店铺索引</h3>
				</div>
				<div class="content text-center" style="min-height:250px">
					<div class="btn btn-150px btn-danger btn-trans btn-lg m20" onclick="clean_index($(this))" data-url="/XsShop/clean"><i class="fa fa-times"></i> 清除索引</div>
					<div class="clearfix"></div>
					<div class="btn btn-150px btn-danger btn-trans btn-lg m20" onclick="build_index($(this))" data-url="/XsShop/build_index"><i class="fa fa-random"></i> 重建索引</div>
					<div class="clearfix"></div>
					<div class="btn btn-150px btn-danger btn-lg m20" onclick="update_index($(this))" data-url="/XsShop/update_index"><i class="fa fa-refresh"></i> 更新索引</div>
				</div>
			</div>
		</div>

		<div class="col-xs-4">
			<div class="block-flat">
				<div class="header">
					<h3>关键词库索引</h3>
				</div>
				<div class="content text-center" style="min-height:250px">
					<div class="btn btn-150px btn-danger btn-trans btn-lg m20" onclick="clean_index($(this))" data-url="/XsKeywords/clean"><i class="fa fa-times"></i> 清除索引</div>
					<div class="clearfix"></div>
					<div class="btn btn-150px btn-danger btn-trans btn-lg m20" onclick="build_index($(this))" data-url="/XsKeywords/build_index"><i class="fa fa-random"></i> 重建索引</div>
					<div class="clearfix"></div>
					<div class="btn btn-150px btn-danger btn-lg m20" onclick="update_index($(this))" data-url="/XsKeywords/update_index"><i class="fa fa-refresh"></i> 更新索引</div>
				</div>
			</div>
		</div>		
	</div>
</div>



<include file="Public:copyright" />
<include file="Public:js" />
<script>
$(document).ready(function(){
	
	

});

function clean_index(obj){
	var url=obj.data('url');
	vmodal({
		title:'清除索引',
		msg:'<h4>确定要清除索引吗？</h4>',
		class:'text-center',
		width:'650px',
		confirm:1,
	},function(ret){
		$('.modal-ok').unbind().click(function(){
			ajax_get({
				url:url
			},function(ret){
				valert(ret);
				if(ret.status=='success'){
					setTimeout(function(){
						$('#ajax-modal').modal('hide');
					},500);
				}
			});
		});
	});
}

function build_index(obj){
	var url=obj.data('url');
	vmodal({
		title:'重建索引',
		msg:'<h4>确定要重建索引吗？</h4><h5 class="md10">重建索引将会清除之前的索引数据影响前端使用！</h5><div class="p10 text-center"><a href="'+url+'" target="_blank" class="btn btn-success btn-rad btn-trans mr10 modal-ok"><i class="fa fa-check"></i> 确定</a><button class="btn btn-rad btn-warning btn-trans modal-cancel" data-dismiss="modal"><i class="fa fa-times"></i> 取消</button></div>',
		class:'text-center',
		width:'650px',
	},function(ret){
		$('.modal-ok').unbind().click(function(){
			$('#ajax-modal').modal('hide');
		});
	});	
}

function update_index(obj){
	var url=obj.data('url');
	vmodal({
		title:'更新索引',
		msg:'<h4>确定要更新索引吗？</h4><h5 class="md10">更新索引不影响前端使用，但无法清除已失效的数据！</h5><div class="p10 text-center"><a href="'+url+'" target="_blank" class="btn btn-success btn-rad btn-trans mr10 modal-ok"><i class="fa fa-check"></i> 确定</a><button class="btn btn-rad btn-warning btn-trans modal-cancel" data-dismiss="modal"><i class="fa fa-times"></i> 取消</button></div>',
		class:'text-center',
		width:'650px',
	},function(ret){
		$('.modal-ok').unbind().click(function(){
			$('#ajax-modal').modal('hide');
		});
	});	
}
</script>
<include file="Public:footer" />